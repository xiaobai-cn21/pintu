<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>拼图分享中心</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <style>/* 默认5列 */
.share-list, #resultContent {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 20px;
}

/* 屏幕宽度小于900px时显示3列 */
@media (max-width: 900px) {
  .share-list, #resultContent {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* 屏幕宽度小于600px时显示1列 */
@media (max-width: 600px) {
  .share-list, #resultContent {
    grid-template-columns: 1fr;
  }
}</style>
</head>
<body>
{% include '_navbar.html' %}
<div class="container" style="max-width: 1200px; margin: 0 auto; padding-bottom: 80px;">
    <div class="background-blur"></div>
    <div class="page-title" style="margin-top: 20px; justify-content: center;">
        <span class="chinese-text" style="color: #F9E078; font-size: 20px;">分享中心</span>
    </div>
   <!-- 标签页容器 -->
<div class="tabs-container">
    <!-- 右上角搜索框区域 -->
    <div style="display: flex; justify-content: flex-end; padding: 10px 0; margin-bottom: 15px;">
        <div style="display: flex; gap: 10px; align-items: center; width: 350px;">
            <div class="input-item" style="flex: 1;">
                <input type="text" id="shareCode"
                       placeholder="请输入6位数字分享码"
                       maxlength="6"
                       oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                       style="font-size: 14px;">
                <div class="error-tip" id="codeError" style="display: none; color: #ff4d4f; font-size: 12px;">请输入有效的6位数字分享码</div>
            </div>
            <button class="btn" onclick="searchShareCode()" style="padding: 10px 20px; background-color: #FAAD14; color: white; border: none; border-radius: 4px; cursor: pointer;">
                <span class="chinese-text">搜索</span>
            </button>
        </div>
    </div>

    <!-- 标签栏 -->
    <div class="tabs-header" style="display: flex; border-bottom: 1px solid #333;">
        <div class="tab" data-tab="myShares" style="padding: 8px 16px; cursor: pointer;">我的分享</div>
        <div class="tab active" data-tab="discoverContent" style="padding: 8px 16px; cursor: pointer; border-bottom: 2px solid #FAAD14;">发现分享</div>
    </div>

    <!-- 标签内容区域 -->
    <div class="tabs-content">

        <!-- 发现分享标签内容 -->
        <div id="discoverContent" class="tab-content active" style="margin-top: 20px;">

            <!-- 热门/最新分享展示区 -->
            <div class="share-list" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 30px;">
                <!-- 内容将通过JS动态加载 -->
            </div>

            <!-- 搜索结果区域 -->
            <div id="searchResult" style="display: none; margin-bottom: 30px;">
                <h3 style="font-size: 16px; margin-bottom: 16px; color: #F9E078;">
                    搜索结果: <span id="searchCodeDisplay"></span>
                </h3>
                <div id="resultContent" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px;">
                    <!-- 搜索结果将通过JS动态插入这里 -->
                </div>
                <div id="noResult" style="display: none; text-align: center; padding: 40px 0;">
                    <p class="chinese-text" style="color: #B8BCC8;">未找到对应分享，请检查分享码是否正确</p>
                </div>
            </div>

            <!-- 分页控制器 -->
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                <!-- 分页内容 -->
            </div>
        </div>
         <!-- 我的分享标签内容 -->
        <div id="myShares" class="tab-content" style="display: none; margin-top: 20px;">
            <div id="mySharesList" class="share-list" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 20px; margin-bottom: 30px;">
                <!-- 我的分享内容将通过JS动态加载 -->
            </div>
            <div id="noMyShares" style="display: none; text-align: center; padding: 40px 0;">
                <p class="chinese-text" style="color: #B8BCC8;">你还没有分享任何关卡</p>
            </div>
            <!-- 分页控制器 -->
            <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                <!-- 分页内容 -->
            </div>
        </div>
    </div>

    <!-- 固定底部创建分享按钮 -->
    <div style="position: fixed; bottom: 0; left: 0; right: 0; background-color: #20223A; border-top: 2px solid #F9E078; padding: 15px; text-align: center; z-index: 1000;">
        <button class="btn btn-primary" style="padding: 12px 40px; font-size: 14px;" onclick="window.location.href='{{ url_for('editor_page') }}'">
            <span class="chinese-text">创建并分享拼图</span>
        </button>
    </div>
</div>

<!-- 帮助页面模态框 -->
<div class="modal-mask" id="helpModal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
        <div class="modal-header">
            <span>操作指南</span>
            <span class="modal-close" onclick="document.getElementById('helpModal').style.display='none'">×</span>
        </div>
        <div class="modal-body" style="font-size: 14px; line-height: 24px; color: #E0E0E0;">
            <p><strong style="color: #F9E078;">1. 分享功能</strong></p>
            <p>- 点击"创建并分享拼图"按钮制作并分享你的拼图</p>
            <p>- 在"我的分享列表"中可以管理你创建的分享</p>
            <p><strong style="color: #F9E078; margin-top: 16px; display: block;">2. 发现拼图</strong></p>
            <p>- 在"发现分享"中浏览其他用户创建的拼图</p>
            <p>- 点击任意拼图卡片即可开始游戏</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="document.getElementById('helpModal').style.display='none'">我知道了</button>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/share.js') }}"></script>
</body>
</html>